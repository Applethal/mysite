---
title: "Systematically visualize the impact of linear constraints in a MIP"
date: 2024-06-02

tags: ["Optimization","Operational research","Mathematics"]
Summary: "I wish this visual trick was given in the many literature that I inspected. The post's picture is from Pop
Team Epic. This article is as of now still WIP"


---
<link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
<script src="https://tikzjax.com/v1/tikzjax.js"></script>

<h3>Introduction</h3>
<p>Mixed integer linear programming (MIP) is easy to comprehend on the surface, you just plug in
    a linear constraint and voila! you now have transformed a LP into a MIP. Learning how to
    systematically write a model with its constraints and component is, sadly, a matter
    of training. Watching all these professors and these seniors formulate constraints at ease makes
    it look easy, which may or may note evoke an air of imposter syndrome.</p>

<p>Just like coding, the goal is to shape the perspective around optimization, that's the passive
    effect of doing exercises. Some of the constraints seem intuitive but once you get into the deeper
    side of linear programming (I.E. Big M, logical constraints...etc..), it becomes a bit hard to visualize the effect
    of a constraint with respect to the optimization problem that you are facing. If you are a beginner in operational
    research and having skipped mathematics, chances are, that every time these
    constraints are brought up, you might feel as if you are missing something elementary. It becomes much more
    frustrating if you try to research any specific since you can't tell where to start, as the anything revolving the
    constraint

    is not so centralized and accessible.</p>

<h3>Shape your perception</h3>



<p>This article is aimed at introducing the method that I use to understand any linear constraint.
    This method is sadly not directly communicated, as it is to be concluded through intuition and can not be
    easily googled. The average Operational research guide or blog expects the person to have some mathematical
    reflexes. This method is meant to be fool-proof, I believe that no one may face difficulties with it.
    This article serves also as a way to centralize most of the modelling tricks that I have learned, you may
    use it as a reference to come back to later on.</p>


<p>Unless relaxed, binary variables express the execution of a decision; if the variable equals 1,
    the decision to execute what the variable expresses is enabled. Do you produce X, do you use X, do you allocate
    X...etc...
</p>


\[
x=\begin{cases}
1 & \text{Decision is to be executed}\\
0 & \text{Otherwise}
\end{cases}
\]


<p>When writing mathematical models, it is imperative to express linear functions (hence the term Linear in the model's
    property). Many modelling
    tricks were invented to cope with constraints that can not be directly translated from a verbal statement. Allow me
    to present the following modelling
    trick: </p>


\[
x \leq y

\]


\[

x, y \in \{0,1\}
\]




<p>This trick helps to formulate situations where the execution of a variable (in this case \(x\)) forces another
    variable (\(y\)) to be true, though we don't
    care about the latter, we want to force them both to be enabled if the former gets the value of 1. In other words:
</p>


<ul>
    <li> If x = 1 then y = 1
    <li> If x = 0 then we don't care if y = 1 or 0
</ul>

<p><u>Concrete example: </u>If Product X is produced, I want Product Y to be produced alongside it. However, I still
    want
    the option to decide on producing Product Y independently of whether Product X gets produced.</p>

<p>How could I understand the desired outcome of this expression ? Before presenting the method, let me explain how this
    whole thing works: <br>

    Graphically, this is how the constraint looks like. Any point that exists outside the area is invalid/infeasible.
    The role of the constraint is to make sure that only the integer points within this area are chosen. With that said,
    the point (1,0) as seen in the picture below is infeasible, <u><b>as the value 1 can never be lower or equal to
            0</b></u>.


</p>


<div class="scroll-container">
    <div class="tikzs">
        <script type="text/tikz">
            \begin{tikzpicture}[scale=4]

    \draw[->] (-0.5,0) -- (2.5,0) node[right] {$x$};
    \draw[->] (0,-0.5) -- (0,2.5) node[above] {$y$};


    \draw[step=1, gray, very thin] (0,0) grid (2.5, 2.5);


    \fill[black] (0,0) circle (1pt) node[below left] {$(0,0)$};
    \fill[black] (1,1) circle (1pt) node[above right] {$(1,1)$};
    \fill[black] (0,1) circle (1pt) node[above left] {$(0,1)$};
    \fill[black] (1,0) circle (1pt) node[above left] {$(1,0)$};


    \begin{scope}[fill=gray, fill opacity=0.3]
        \clip (0,0) -- (1,1) -- (0,1) -- cycle;
        \fill[gray, opacity=0.3] (0,0) rectangle (1,1);
    \end{scope}


    \foreach \x in {0,1,2} {
        \draw (\x,1pt) -- (\x,-1pt) node[below] {$\x$};
    }
    \foreach \y in {0,1,2} {
        \draw (1pt,\y) -- (-1pt,\y) node[left] {$\y$};
    }

\end{tikzpicture}
      </script>

    </div>
    <p style="color: #888; font-size: 14px; text-align: center;">Graphical depiction of the aforementioned constrain</p>
</div>


<p>That's right, by all logic, 1 can't be lower or equal than 0 for sure, so how do I perceive this ? Truth is, I don't
    draw a 2 dimensional axis and a feasible region ? There is an even faster way:


</p>


<div style="display: flex; justify-content: center; align-items: center;">
    <table border="1" style="border-collapse: collapse; text-align: center; width: 60%;">
        <tr>
            <th style="width: 20%;">X</th>
            <th style="width: 20%;">Y</th>
            <th>Feasible ?</th>
        </tr>
        <tr>
            <td>0</td>
            <td>0</td>
            <td>Feasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>0</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>0</td>
            <td>1</td>
            <td>Feasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>Feasible</td>
        </tr>
    </table>
</div>


<p>Here is how I do it: I draw a table up to \(n\) number of variables on the columns and then I list
    all of their possible values, luckily, what makes this method faster than graphically checks is the fact that the
    variables are binary and can't have anything other
    than 0s and 1s, which by extension means that you will have \(2^n\) rows. Finally, I check the feasibility with
    respect to the mechanics of the constraint.
    This is a method that I absorbed by watching a student do it few years ago, and as I mentioned, I have not seen this
    in any OR literature yet.
</p>



<p>Although this method is meant to quickly help understand how a mathematical constraint works, I have seen that
    same student use it to write and design constraints. I believe this could help in this regard, especially if the
    variables are strictly binary. I would be happy to see if there is a better and quicker way, I will certainly update
    this guide
    if I ever find anything fruitful.
</p>

<p>I have to admit that I still relay on my muscle memory to write optimization models, it takes some intelligence
    to write some cool constraints. It's an art!
</p>

<h3>Modeling If -> NOT</h3>

<p>We've seen the logical IF -> Then true, the following becomes easier to understand after utilizing the method:</p>


\[
x \leq 1 - y
\]

\[
x, y \in \{0,1\}
\]

<div style="display: flex; justify-content: center; align-items: center;">
    <table border="1" style="border-collapse: collapse; text-align: center; width: 60%;">
        <tr>
            <th style="width: 20%;">X</th>
            <th style="width: 20%;">Y</th>
            <th>Feasible ?</th>
        </tr>
        <tr>
            <td>0</td>
            <td>0</td>
            <td>Feasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>0</td>
            <td>Feasible</td>
        </tr>
        <tr>
            <td>0</td>
            <td>1</td>
            <td>Feasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>Infeasible</td>
        </tr>
    </table>
</div>

<p>Notice that \(x\) and \(y\) can never both contain a value of 1 at the same time, the constraint is feasible only
    when either \(x\) or \(y\) gets the value of 1 (or 0 optionally). Verbally, this expression says the following: If
    \(x\) gets 1 then \(y\) should NOT get 1 and vice versa.
    I believe this equation can be visually simplified by swapping its terms like this; this is how I remember it:</p>

\[
x + y \leq 1
\]

<p>Like this, you may easily remember it by considering that 2 can never be greater than 1. Next, I will display
    how to model the AND statement.
</p>


<h3>Modeling AND</h3>

<p>Picture this: What if I want to either produce both \(x\) and \(y\) at the same time or produce neither. I can't
    simply plug+in the last inequality from the previous section because there would always be the off chance that
    either
    \(x\) or \(y\) get a value of 1. Let's review the nature of the desirable output, either:

</p>

<ul>
    <li>Neither \(x\) or \(y\) may be produced</li>
    <li>We produce \(x\) and \(y\) at the same time</li>
</ul>

<p>One idea that I would use as a headstart is to use the following equation: \(x + y = 2\), but the issue with this one
    is that
    it does not allow the first part of the condition to function, as it will always result into producing both
    products. One workaround to deal with this is to introduce a new binary variable \(z\) that goes enabled <b><u>only
            if</u></b>
    \(x\) and \(y\)
    have a value of 1.

</p>

\[z \leq x\]
\[z \leq y\]
\[x + y - 1 \leq z \]
\[x,y,z \in \{0,1\}\]


<p>With this combination, only the two desired outcomes may happen. All of these constraints are essential. The third
    inequality
    is the very key component of the whole logic. As far as logic is concerned, with the boolean checks table in mind,
    for each variable, we check the feasibility not for just one constraint, but for them all:
</p>

<div style="display: flex; justify-content: center; align-items: center;">
    <table border="1" style="border-collapse: collapse; text-align: center; width: 60%;">
        <tr>
            <th style="width: 20%;">X</th>
            <th style="width: 20%;">Y</th>
            <th style="width: 20%;">Z</th>
            <th>Feasible ?</th>
        </tr>
        <tr>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>Feasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>0</td>
            <td>0</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>0</td>
            <td>1</td>
            <td>0</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>0</td>
            <td>0</td>
            <td>1</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>0</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>0</td>
            <td>1</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>0</td>
            <td>1</td>
            <td>1</td>
            <td>Infeasible</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
            <td>1</td>
            <td>Feasible</td>
        </tr>

    </table>
</div>




<h3>Modelling precedence constraints</h3>


<p>Precedence constraints usual concern problems where sequencing is a hard constraint that must occur, else the modeled problem may be infeasible.
This is usually the case for complex problems like Vehicle routing problems (VRP), Traveling salesman problem (TSP) and scheduling where choosing the right
permutations is crucial to controlling the objective function.

<br> Naturally, when designing constraints for such problems, in VRPs for instance, you might be challenged by a capacity constraint, forcing you to choose the
right sequence of customers such as to respect your limited capacity. In Flow/Job shop scheduling, you would want a sequence of jobs such as they don't overlap on each other
and between each machine. Let's use the former as a use case!
</p>

<p>In MIP, sequencing is often modeled with a decision variable that denotes if we execute action \(i\) before \(j\), do we visit customer \(i\) before \(j\),
do we execute job \(i\) before \(j\)...A single index is not enough to tell a permutation (As of today, who knows if someone invents something crazy).</p>



\[
x_{i,j}=\begin{cases}
1 & \text{Execute action \(i\) before action \(j\)}\\
0 & \text{Otherwise}
\end{cases}
\]

<p>Getting deeper in operational research would eventually expose you to a famous constraint that helps against permutation-based problems. The Miller-Truck-Zemling (Miller et al., 1960)
can be seen in various MIPs. This expression also magically eliminates subtours in TSP.</p>




